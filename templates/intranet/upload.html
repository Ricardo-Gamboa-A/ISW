{% extends 'shared/base.html' %}
{% load staticfiles %}
{% block content %}

<div class="title-section">
	<div class="title-label"><h1>Subir documento</h1></div>
</div>

<div class="grid row">
	<div id="content">
		<div class="side left-side">
			<div class="side-section">
				<ul>
					<li class="section-head"><h3>Enlaces</h3></li>
					<li class="section-row"><a href="{% url 'intranet' %}">Documentos</a></li>
					<li class="section-row"><a href="{% url 'profile' request.user.id %}">Mi perfil</a></li>
					<li class="section-row"><a href="{% url 'users' %}">Usuarios</a></li>
					<li class="section-row"><a href="#">Categorias</a></li>
					<li class="section-row"><a href="#">Subir documento</a></li>
				</ul>
			</div>
			<div class="clear"></div>
		</div>
		<div class="body">
			{% if message %}
				<h5 class="message-{{ message.type }}">{{ message.content }}</h5>
			{% endif %}	
			<div class="search-bar">
				<div class="clear"></div>
			</div>	
			<h4 class="documents-message">Subir documento desde</h4>

			<div id="upload-selector-container">
				<div class="upload-selector" upload-method="local" frst="True">
					<h5>Archivos locales</h5>
					<i class="fa fa-file-pdf-o" aria-hidden="true"></i>
				</div>
				<div class="upload-selector" upload-method="drive" frst="True">
					<img src="{% static 'intranet/images/google-drive-logo-lockup.png' %}">
				</div>
				<div class="clear"></div>
			</div>
			<div class="upload-body" upload-method="local" style="display: none;">
				<button id="add-btn">Añadir documento(s)</button>
				<input id="mult-files" type="file"accept="application/pdf" style="display: none" multiple>

				<!--<div class="document-frame" doc-index="0">
					<div class="frame-header">
						<h5 class="frame-title">Titulo.pdf</h5>
						<button class="close-btn"><i class="fa fa-times" aria-hidden="true"></i></button>
						<div class="clear"></div>
					</div>
					
					<ul class="frame-data">
						<li><strong>Titulo:</strong> <input type="text" placeholder="Ej: Tesis de microbiologia"></li>
						<li><strong>Autor:</strong> <input type="text"  placeholder="Ej: Hernán Herreros"></li>
						<li><strong>Año:</strong> <input type="text" placeholder="Ej: 2016"></li>
						<li><strong>Colaboradores:</strong> <input type="text"></li>
						<li><strong>Privacidad:</strong> <input type="text"></li>
					</ul>
				</div>-->
			</div>

			<div class="upload-body" upload-method="drive" style="display: none;">
				
			</div>
			<div id="lower-bar">
				<div id="red-bar" class="bar"></div>
				<div id="green-bar" class="bar"></div>					
				<div id="yellow-bar" class="bar"></div>	
				<div id="blue-bar" class="bar"></div>	
			</div>	
		</div>
		<script>
			$('#document').on('change', function(){
				$('#add-btn').attr('state', 'x');
				$('#plus-circle').addClass('plus-circle-open');
				$('#file-name').text(this.files[0].name);
				$('#add-btn').addClass('circle-rotate');
				console.log(this.files[0].name);
				getMeta(this.files[0]);
			});

			$('.upload-selector').click(function(){
				if($(this).hasClass('unselect')){
					$(this).removeClass('unselect');
					methodSwitcher($(this).attr('upload-method'));
				}
				else if($(this).attr('frst')){
					$('.upload-selector').removeAttr('frst');
					methodSwitcher($(this).attr('upload-method'));
				}

				if ($(this).attr('upload-method') == 'local')
					$('.upload-selector[upload-method="drive"]').addClass('unselect');
				else
					$('.upload-selector[upload-method="local"]').addClass('unselect');
			});

			$('#add-btn').click(function(){
				$('#mult-files').click();
			});

			$('#mult-files').change(function(){
				addDocument();
				$(this).resetInput();
			});
		</script>
		<div class="clear"></div>
	</div>
</div>

{% endblock %}