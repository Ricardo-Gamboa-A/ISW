{% extends 'shared/base.html' %}

{% block content %}

<div class="title-section">
	<div class="title-label"><h1>Subir documento</h1></div>
</div>

<div class="grid row">
	<div id="content">
		<div class="side left-side">
			<div class="side-section">
				<ul>
					<li class="section-head"><h3>Enlaces</h3></li>
					<li class="section-row"><a href="{% url 'intranet' %}">Documentos</a></li>
					<li class="section-row"><a href="#">Mi perfil</a></li>
					<li class="section-row"><a href="#">Usuarios</a></li>
					<li class="section-row"><a href="#">Categorias</a></li>
					<li class="section-row"><a href="#">Subir documento</a></li>
				</ul>
			</div>
			<div class="clear"></div>
		</div>
		<div class="body">
			<form action="{% url 'upload' %}" method="GET">
				<ul id="upload-list">
					<div class="search-bar">
						<div class="clear"></div>
					</div>
					<!--<li id="upload-frame">
						<h3>Click aquí para subir archivo o arrastra el documento</h3>
					</li>-->
					<li class="upload-row" id="document-row">
						<label>Documento:</label>
						<div id="plus-circle" class="">
							<div><span id="add-btn" state="+" class="icon-plus"></span></div>
							<span id="file-name">Nombre del archivo.pdf</span>
						</div>
						<input id="document" type="file" accept="application/pdf" style="display: none" name="document" required>
						<div class="clear"></div>	
					</li>
					<li class="upload-row">
						<label>Tipo de documento:</label>
						<select name="type" required>
							<option value="" disabled selected>Selecciona una opción</option>
							<option value="public">Público</option>
							<option value="private">Privado</option>
						</select>
						<div class="clear"></div>	
					</li>
					<li class="upload-row">
						<label>Categoria:</label>					
						<select name="category" required>
							<option value="" disabled selected>Selecciona una opción</option>
							<option value="microbiologia molecular">Microbiologia Molecular</option>
							<option value="biotecnologia molecular">Biotecnologia ambiental</option>
						</select>
						<div class="clear"></div>				
					</li>
					<li class="upload-row">
						<label>Titulo:</label>					
						<input id="title" class="input-text" type="text" name="title" required> 
						<div class="clear"></div>				
					</li>
					<li class="upload-row">
						<label>Autor:</label>					
						<input id="author" class="input-text" type="text" name="author" required> 
						<div class="clear"></div>				
					</li>
					<li class="upload-row">
						<label>Fecha:</label>					
						<input id="date" class="input-text" type="text" name="date" required> 
						<div class="clear"></div>				
					</li>
					<input id="submit-btn" type="submit" value="Subir documento">
					<div id="lower-bar">
						<div id="red-bar" class="bar"></div>
						<div id="green-bar" class="bar"></div>					
						<div id="yellow-bar" class="bar"></div>	
						<div id="blue-bar" class="bar"></div>	
					</div>	
				</ul>
			</form>
		</div>
		<script>
			$('#add-btn').click(function(){
				if($(this).attr('state') == '+'){
					$('#document').trigger('click');
				}
				else{
					$(this).attr('state', '+');
					$('#plus-circle').removeClass('plus-circle-open');
					$('#add-btn').removeClass('circle-rotate');
					$('#document').resetInput();
					$('.input-text').val('').prop('readOnly', false).removeClass('read-only');
				}
			});
			$('#document').on('change', function(){
				$('#add-btn').attr('state', 'x');
				$('#plus-circle').addClass('plus-circle-open');
				$('#file-name').text(this.files[0].name);
				$('#add-btn').addClass('circle-rotate');
				console.log(this.files[0].name);
				getMeta(this.files[0]);
			});
		</script>
		<div class="clear"></div>
	</div>
</div>

{% endblock %}