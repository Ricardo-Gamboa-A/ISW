{% extends 'intranet/shared.html' %}
{% load staticfiles %}
{% load i18n %}
{% block css %}
	<link href='https://fonts.googleapis.com/css?family=Product+Sans:400,400i,700,700i' rel='stylesheet' type='text/css'>
{% endblock %}
{% block extra_js %}
	{% if request.user == profile_user %}
		 <script src="{% static 'intranet/js/vendor/canvas-to-blob.min.js' %}"></script>
	{% endif %} 
{% endblock %}
{% block content %}
<div class="title">
	<h3>{% trans "Mis noticias" %}</h3>
</div>
<div class="intranet row">
	<div class="c12">
		<div class="intranet box">
			<div class="upload head">
				<h1>Noticias de {{ request.user.first_name }}</h1>
				<h4>Aqui encontrarás todas las noticias que has agregado</h4>
			</div>
		</div>
	</div>
	<div class="c12">
		<div class="intranet box news">
			<div class="head clear">
				<a href="#createModal" class="s10 c2 add trans modal">{% trans "Añadir noticia" %}</a>
			</div>
			<div class="list clear">
				{% for news in user_news %}
					<div class="item clear">
						<div class="details c10">
							{%if news.date%}<span class="date">{{news.date|date:'d'}} · {{news.date|date:'F'}} · {{news.date|date:'Y'}}</span>{%endif%}
							{%if news.title%}
								<a href="{% url 'webpage:news' news.date.year news.date.month news.date.day news.slug %}">
									<h2 class="title">{{news.title}}</h2>
								</a>
							{%endif%}
							{%if news.source%}<span class="source"><strong>Fuente: </strong><a href="#">www.biobiochile.cl</a></span>{%endif%}
						</div>
						<div class="buttons c2">
							<div class="wrapper">
								<a href="{% url 'webpage:news_editor' news.id %}" class="fa-stack fa-lg edit trans">
									<i class="fa fa-circle fa-stack-2x"></i>
									<i class="fa fa-pencil fa-stack-1x fa-inverse"></i>
								</a>
								<a href="#" class="fa-stack fa-lg delete trans">
									<i class="fa fa-circle fa-stack-2x"></i>
									<i class="fa fa-trash-o fa-stack-1x fa-inverse"></i>
								</a>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		</div>
	</div>
</div>
<!-- Modal para seleccionar el tipo de creacion -->
<div id="createModal" class="news modal clear"  style="display:none!important; height:100%;">
	<div class="c12">
		<h3 style="text-align: center; margin:0; font-weight:normal">{% trans "Selecciona un metodo de creación" %}</h3>
	</div>
	<div class="c12">
		<div class="c6">
			<div class="intranet box">
			<a href="{% url 'intranet:create_news' %}">
				<div class="write trans">
					<h5>{% trans "Redactar" %}</h5>
				</div>
			</div>
			</a>
		</div>
		<div class="c6">
			<div class="intranet box">
				<a href="{% url 'intranet:create_news_from_link' %}">
					<div class="link trans">
						<h5>{% trans "Enlace" %}</h5>
					</div>
				</a>
			</div>
		</div>
	</div>
</div>
<script>
	var update_picture_url = "{% url 'intranet:update_picture' %}";
	var edit_document_url = "{% url 'intranet:edit_document' '888' '999' %}";
	var csrf_token = "{{ csrf_token }}";
	var authentication_url = "http://{{ request.get_host }}{% url 'get_credentials' %}";
	var password_url = "{% url 'change_password' %}";
</script>
<script src="{% static 'intranet/js/news/news_init.js' %}"></script>
{% endblock %}